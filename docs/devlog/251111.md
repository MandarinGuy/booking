## 예찬

공연 좌석 목록 조회 기능을 구현하려고 하다보니 공연 좌석 등록 기능이 필요하다는 사실을 깨달았다. 그래서 공연 좌석 등록 기능을 구현했다. 기능을 구현하더라도 선행되는 조건이 있는것을 사전에 인지할 수 있었다면
불필요한 시간 소모가 없었을거 같은데 조금은 아쉬운 부분이 있다.

기본적으로 공연 일정을 등록할때 해당 공연장의 좌석과 매핑이 가능한 형태로 API를 확장시켰다. 기존에는 일정 정보만 저장하는 형태였다면 현재 방식은 해당 일정을 어떤 공연장의 어떤 구역에서 진행하는지, 등급별
좌석은 어떤 좌석들을 해당시킬지 등을 한번에 영속한다. 과정에서 조회 목적을 위한 데이터 모델로 `Inventory`라는 개념을 도입했다. 현재는 RDB에 사용할 모델로 관리하고 있지만 NoSQL 모델로 사용되는것도
충분히 가능해 보인다고 생각된다.

현재까지 작업을 진행하며 있었던 몇가지 고질적인 문제도 함께 개선했다. 여러개의 속성을 영속화 할때 batch insert를 하는 방법이다. sequence를 사용하여 bulk insert 하는 방법도 있긴 하지만
현재 사용중인 데이터베이스인 MYSQL 기준으로 식별자 생성 전력이 IDENTITY가 가장 적합하기도 할 뿐더러 SEQUENCE 세팅 전략을 생각하는것도 사실 쉬운일은 아닌거 같다. 그래서 일단 JDBC
Template를 사용해 한번에 insert할 네이티브 쿼리를 작성하는 방식을 채택했다. 좀 간단하게 해결할 방법이 있으면 좋겠단 생각이 있어서 별도의 라이브러리 형태의 도구도 만들어봤고
QueryDSL-EntityQL을 적용할까 생각도 해봤는데 둘다 만족스러운 형태로는 잘 되지 않아서 일단은 현재 형태로 만족하려고 한다.  
